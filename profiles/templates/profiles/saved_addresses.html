{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Manage Your Addresses</h2>
    
    <!-- List of Saved Addresses -->
    {% if addresses %}
    <div class="list-group mb-4">
        <!-- Billing Address if Present -->
        <div class="list-group-item bg-light border-primary">
            <h5 class="mb-1">
                Billing Address 
                <i class="fas fa-star text-warning" title="Default Billing Address"></i>
            </h5>
            <p class="mb-1">
                {{ user_profile.default_street_address1 }}<br>
                {% if user_profile.default_street_address2 %}{{ user_profile.default_street_address2 }}<br>{% endif %}
                {{ user_profile.default_town_or_city }}, {{ user_profile.default_county }}<br>
                {{ user_profile.default_postcode }}<br>
                {{ user_profile.default_country }}
            </p>
        </div>

        <!-- List of Saved Recipient Addresses -->
        {% for address in addresses %}
            <div class="list-group-item {% if address.is_default %}bg-light border-primary{% endif %}">
                <h5 class="mb-1">
                    {{ address.recipient_name }}
                    {% if address.is_default %}
                        <i class="fas fa-star text-warning" title="Default Address"></i>
                    {% endif %}
                </h5>
                <p class="mb-1">
                    {{ address.recipient_street_address1 }}<br>
                    {% if address.recipient_street_address2 %}{{ address.recipient_street_address2 }}<br>{% endif %}
                    {{ address.recipient_town_or_city }}, {{ address.recipient_county }}<br>
                    {{ address.recipient_postcode }}<br>
                    {{ address.recipient_country }}
                </p>
                <div class="btn-group" role="group">
                    <a href="{% url 'edit_address' address.id %}" class="btn btn-outline-secondary">Edit</a>
                    <a href="{% url 'delete_address' address.id %}" class="btn btn-outline-danger">Delete</a>
                    {% if not address.is_default %}
                        <a href="{% url 'set_default_address' address.id %}" class="btn btn-outline-primary">Set as Default</a>
                    {% else %}
                        <span class="badge badge-primary">Default</span>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
    
    {% else %}
        <p class="text-muted">You do not have any saved addresses. Add one below.</p>
    {% endif %}

    <!-- Button to Add New Address -->
    <a href="{% url 'add_address' %}" class="btn btn-primary">Add New Address</a>
</div>

{% endblock %}
